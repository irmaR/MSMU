<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta name='Copyright' content= '&copy; 2009 John Wiley &amp; Sons, Inc.' />
	<meta name='Description' content=
		'Lecture Slides for Cay Horstmann, _Big C++_, 2nd ed.' />
	<meta name='Author' content='Kurt Schmidt' />
	<meta name='Publisher' content='John Wiley &amp; Sons, Inc.' />
	<meta http-equiv='Content-Language' content='en-us' />
	<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1' />
	<meta name='Date' content='2008' />
	<script src='./config.js' type='text/javascript'></script>
	<script src='../Scripts/pageFormat.js' type='text/javascript'></script>
	<link rel='stylesheet' type='text/css' media='screen, projection'
		href='../Slidy/show.css' />
	<script src='../Slidy/slidy.js' type='text/javascript'></script>
	<link rel='stylesheet' type='text/css' media='print' href=
		'../Slidy/print.css' />
	<script type='text/javascript'><!-- // Set title on browser window
		title()
	//--></script>
</head>

<body>

<div class='slide cover'>
<img src='../images/cover.png' alt='_C++ for Everyone_ cover art' class='cover' />

<h1> Chapter 
	<script type='text/javascript'>
	//<![CDATA[
		 chapter()
	//]]>
	</script>
	&#8211; Loops </h1>
</div>

<div class='slide'>
<h1> Chapter Goals </h1>
<ul>
	<li> To learn about <code>while</code>, <code>for</code> and
		<code>do</code> loops </li>
	<li> To avoid infinite loops and off-by-one errors </li>
	<li> To understand nested loops </li>
	<li> To implement programs that read and process data sets </li>
	<li> To use a computer for simulations </li>
</ul>
</div>


<div class='slide'>
<h1>
	<script type='text/javascript'>
	//<![CDATA[
		section( "1" )
	//]]>
	</script>
	The <code>while</code> Loop </h1>
<table>
<tr><td colspan='2'>
	<ul>
		<li> Repeatedly execute statements, until a goal has been reached </li>
		<li> Consider the algorithm (ch. 1) to find the number of years required
			for an investment of $10,000 to grow, at a rate of 5%/yr, to $20,000
			</li>
		</ul>
</td></tr>
<tr><td>
	<ul>
		<li> Start with a year value of 0 and a balance of $10,000 </li>
		<li> Repeat the following steps while the balance is less than
			$20,000
			<ul>
				<li> Add 1 to the year value </li>
				<li> Multiply the balance value by 1.05 (a 5 percent increase)
					</li>
			</ul>
		</li>
		<li> Report the final year value as the answer </li>
	</ul>
</td>
<td>
	<div class='center'>
	<script type='text/javascript'>
	//<![CDATA[
		image( "ledger1.png" )
	//]]>
	</script>
	</div>
</td></tr>
</table>
</div>

<div class='slide'>
<h1> The <code>while</code> Loop </h1>
<table>
	<tr><td>
		<ul>
			<li> How do we repeat until we've reached $20,000 ? </li>
			<li> The C++ <code>while</code> stmt. implements such a repetition:
<pre>while (<dfn>condition</dfn>)<dfn>
{
   statements</dfn>
}</pre>
			</li>
			<li> Increment the year counter and add interest while the balance is less
				than the target ($20K)
<pre>while (balance &lt; TARGET)
{
	 year++;
	 balance = balance * ( 1 + RATE / 100 );
}</pre>
			</li>
		</ul>
	</td>
	<td>
		<div class='center'>
		<script type='text/javascript'>
		//<![CDATA[
			image( "fig1.png" )
		//]]>
		</script>
		<p class='caption'> <span class='blue'>Figure 1</span> Flowchart of a
			<code>while</code> Loop </p>
		</div>
	</td></tr>
</table>
</div>

<div class='slide'>
<h1> The <code>while</code> Loop - <code>doublinv.cpp</code></h1>
<script type='text/javascript'>
	//<![CDATA[
		wrapCode( "doublinv.cpp" )
	//]]>
</script>
</div>

<div class='slide'>
<h1> The <code>while</code> Loop - <code>doublinv.cpp</code></h1>
<div class='center'>
<script type='text/javascript'>
//<![CDATA[
	image( "fig2.png" )
//]]>
</script>
<p class='caption'> <span class='blue'>Figure 2</span> Flow of the
<code>doublinv</code> Loop </p>
</div>
</div>

<div class='slide'>
<h1 class='syntax'> Syntax 
	<script type='text/javascript'>
	//<![CDATA[
		taxonomy( "1" )
	//]]>
	</script>
	: <code>while</code> Statement </h1>
<div class='center'>
<script type='text/javascript'>
//<![CDATA[
	image( "syn1.png" )
//]]>
</script>
</div>
</div>

<div class='slide'>
<h1> Table 4.1: The <code>while</code> Loop - examples </h1>
<table class='book'>
	<tr>
		<th>Loop<br /><code>i = 5;</code></th>
		<th>Output</th>
		<th>Explanation</th>
	</tr>
	<tr>
		<td style='text-align:left'>
<pre>while (i &gt; 0) {
   cout &lt;&lt; i &lt;&lt; " ";
   i--;
}</pre>
		</td>
		<td style='text-align:left'> <code>5 4 3 2 1</code> </td>
		<td> When i is 0, the loop condition is false, and the loop ends </td>
	</tr>
	<tr>
		<td style='text-align:left'>
<pre>while (i &gt; 0)
{
   cout &lt;&lt; i &lt;&lt; " ";
   i++;
}</pre>
		</td>
		<td style='text-align:left'><code>5 6 7 8 9 10 11 ...</code></td>
		<td>The i++ statement is an error causing an infinite loop (see Common
			Error 4.1 on page 135) </td>
	</tr>
	<tr>
		<td style='text-align:left'>
<pre>while (i &gt; 5)
{
   cout &lt;&lt; i &lt;&lt; " ";
   i--;
}</pre>
		</td>
		<td> (No output) </td>
		<td> The statement i &gt; 5 is false, and the loop is never executed
		</td>
	</tr>
	<tr>
		<td style='text-align:left'>
<pre>while (i &lt; 0)
{
   cout &lt;&lt; i &lt;&lt; " ";
   i--;
}</pre>
		</td>
		<td> (No output) </td>
		<td> The programmer probably thought, .Stop when i is less than 0..
			However, the loop condition controls when the loop is executed, not
			when it ends (see Common Error 4.2 on page 136) </td>
	</tr>
	<tr>
		<td style='text-align:left'>
<pre>while (i &gt; 0) ;
{
   cout &lt;&lt; i &lt;&lt; " ";
   i--;
}</pre>
		</td>
		<td> (No output, program does not terminate) </td>
		<td> Note the semicolon before the {. This loop has an empty body. It
			runs forever, checking whether i &gt; 0 and doing nothing in the body
		</td>
	</tr>
</table>
</div>

<div class='slide'>
<h1>
	<script type='text/javascript'>
	//<![CDATA[
		section( "7" )
	//]]>
	</script>
	The <code>for</code> Loop </h1>
<ul>
	<li> Loops that count are <em>very</em> common:
<pre>counter = 1;
while (count &lt;= 10)
{
   cout &lt;&lt; counter &lt;&lt; endl;
   ++counter;
}</pre>
	</li>
	<li> The <code>for</code> loop is intended for counting:
<pre>for (counter = 1; counter &lt;= 10; ++counter )
{
   cout &lt;&lt; counter &lt;&lt; endl;
}</pre>
	</li>
	<li> Semantically identical to a <code>while</code> loop </li>
</ul>
</div>

<div class='slide'>
<h1> The <code>for</code> Loop </h1>
<p> In general, the <code>for</code> loop </p>
<pre>for (<dfn>init</dfn>; <dfn>check</dfn>; <dfn>update</dfn>)
{
   <dfn>statements</dfn>
}</pre>
<p> is exactly the same as the <code>while</code> loop </p>
<pre><dfn>init</dfn>;
while ( <dfn>check</dfn> )
{
   <dfn>statements</dfn>
   <dfn>update</dfn>
}</pre>
<p> The difference is idiomatic.  <code>for</code> loops count,
<code>while</code> loops wait for something. </p>
</div>

<div class='slide'>
<h1 class='syntax'> Syntax 
	<script type='text/javascript'>
	//<![CDATA[
		taxonomy( "2" )
	//]]>
	</script>
 : <code>for</code> Statement </h1>
<div class='center'>
<script type='text/javascript'>
//<![CDATA[
	image( "syn2.png" )
//]]>
</script>
</div>
</div>

<div class='slide'>
<h1> The <code>for</code> Loop </h1>
<div class='center'>
<script type='text/javascript'>
//<![CDATA[
	image( "fig4.png" )
//]]>
</script>
<p class='caption'> <span class='blue'>Figure 4</span> Execution of a
<code>for</code> Loop </p>
</div>
</div>

<div class='slide'>
<h1> The <code>for</code> Loop </h1>
<ul>
	<li> You can declare the loop variable in the loop:
<pre>for (int i = 1; i &lt;= 10; ++i )
{
   ...
}	// i no longer defined here</pre>
		<ul>
			<li> Local to that loop </li>
		</ul>
	</li>
	<li> Any expression is fine.  Count backwards:
		<pre>for (i = 10; i &gt; 0 ; --i )</pre>
	</li>
	<li> Examine each digit of a (positive) number:
<pre>cin &gt;&gt; n ;
for ( ; n &gt; 0; n/=10) ...</pre>
	</li>
</ul>
</div>

<div class='slide'>
<h1> The <code>for</code> Loop - <code>invtable.cpp</code></h1>
<script type='text/javascript'>
	//<![CDATA[
		wrapCode( "invtable.cpp" )
	//]]>
</script>
</div>

<div class='slide'>
<h1> The <code>for</code> Loop - <code>invtable.cpp</code></h1>
<p> Output: </p>
<pre> 1: 10500.00
 2: 11025.00
 3: 11576.25
 4: 12155.06
 5: 12762.82
 6: 13400.96
 7: 14071.00
 8: 14774.55
 9: 15513.28
10: 16288.95</pre>
</div>

<div class='slide'>
<h1> Table 4.2: The <code>for</code> Loop - examples </h1>
<table class='book'>
	<tr>
		<th>Loop</th>
		<th>Values of <code>i</code></th>
	
	<th>Coments</th>
	</tr>
	<tr>
		<td class='code'>
			<code> for (i = 0; i &lt;= 5; i++) </code>
		</td>
		<td style='text-align:left'><code> 0 1 2 3 4 5 </code></td>
		<td> Note that the loop is executed 6 times.  (See Quality Tip 4.3 on page 143.) </td>
	</tr>
	<tr>
		<td class='code'>
			<code> for (i = 5; i &gt;= 0; i--) </code>
		</td>
		<td style='text-align:left'><code> 5 4 3 2 1 0 </code></td>
		<td> Use i-- for decreasing values. </td>
	</tr>
	<tr>
		<td class='code'>
			<code> for (i = 0; i &lt; 9; i = i + 2) </code>
		</td>
		<td style='text-align:left'><code> 0 2 4 6 8 </code></td>
		<td> Use i = i + 2 for a step size of 2. </td>
	</tr>
	<tr>
		<td class='code'>
			<code> for (i = 0; i != 9; i = i + 2) </code></td>
		<td style='text-align:left'><code> 0 2 4 6 8 10 12 14
			...</code><br />(infinite loop) </td>
		<td> You can use &lt; or &lt;= instead of != to avoid this problem. </td>
	</tr>
	<tr>
		<td class='code'>
			<code> for (i = 1; i &lt;= 20; i = i * 2) </code></td>
		<td style='text-align:left'><code> 1 2 4 8 16 </code></td>
		<td> You can specify any rule for modifying i, such as doubling it in every step. </td>
	</tr>
	<tr>
		<td class='code'>
			<code> for (i = 0; i &lt; str.length(); i++) </code></td>
		<td style='text-align:left'><code> 0 1 2 ...</code> until the last valid
			index of the string str </td>
		<td>  In the loop body, use the expression str.substr(i, 1) to get a
			string containing the ith character </td>
	</tr>
</table>
</div>

<div class='slide'>
	<h1 class='qualtip'> Quality Tip 
	<script type='text/javascript'>
	//<![CDATA[
		taxonomy( "3" )
	//]]>
	</script>
</h1>
<h3> Count Iterations </h3>
<ul>
	<li> Choosing correct upper and lower bounds is confusing.  Start at 0?
		1?  Use &lt;b?  &lt;=b? </li>
	<li> This loop runs <code>b-a</code> times:
		<pre>for (i = a; i &lt; b; ++i )</pre>
	</li>
	<li> So, this loop runs <code>s.length()</code> times:
		<pre>for (i = 0; i &lt; s.length(); ++i )</pre>
	</li>
	<li> This loop runs <code>b-a+1</code> times:
		<pre>for (i = a; i &lt;= b; ++i )</pre>
	</li>
	<li> Remember, a fence with 4 sections needs 5 posts </li>
</ul>
</div>

<div class='slide'>
<h1>
	<script type='text/javascript'>
	//<![CDATA[
		section( "8" )
	//]]>
	</script>
	The <code>do</code> Loop </h1>
<table>
<tr>
	<td>
		<ul>
			<li> Executes body at least once
<pre>do
{
   <dfn>statements</dfn>
}
while (<dfn>condition</dfn>);</pre>
			</li>
			<li> E.g., validating user input:
<pre>do
{
   cout &lt;&lt; "Please enter a positive number;
   cin &gt;&gt; x;
} while (x &lt;= 0);</pre>
		</ul>
	</td>
	<td>
		<div class='center'>
		<script type='text/javascript'>
		//<![CDATA[
			image( "fig6.png" )
		//]]>
		</script>
		<p class='caption'> <span class='blue'>Figure 6</span> Flowchart of a
			<code>do</code> Loop </p>
	</div>
	</td>
</tr></table>
</div>

<div class='slide'>
<h1>
	<script type='text/javascript'>
	//<![CDATA[
		section( "4" )
	//]]>
	</script>
	Nested Loops </h1>
<table>
<tr>
	<td>
		<ul>
			<li> Consider the table to the right </li>
			<li> To print the table:
<pre>for (x = 1; x &lt;= XMAX; ++x )
{
   <dfn>print x-th</sup> row</dfn>
   <dfn>print a newline</dfn>
}</pre>
			</li>
			<li> To print the <var>x</var><sup>th</sup> row:
<pre>for (n = 1; n &lt;= NMAX; ++i )
   cout &lt;&lt; setw(10) &lt;&lt; pow(x, n);</pre>
			</li>
		</ul>
	</td>
	<td>
		<table style='text-align:right'>
			<tr>
				<td> x<sup>1</sup> </td>
				<td> x<sup>2</sup> </td>
				<td> x<sup>3</sup> </td>
				<td> x<sup>4</sup> </td>
			</tr>
			<tr>
				<td> 1 </td>  <td> 1 </td>  <td> 1 </td>  <td> 1 </td>
			</tr>
			<tr>
				<td> 2 </td>  <td> 4 </td>  <td> 8 </td>  <td> 16 </td>
			</tr>
			<tr>
				<td> 3 </td>  <td> 9 </td>  <td> 27 </td>  <td> 81 </td>
			</tr>
			<tr>
				<td> &hellip; </td>  <td> &hellip; </td>  <td> &hellip; </td>  <td>
				&hellip; </td>
			</tr>
			<tr>
				<td> 10 </td>  <td> 100 </td>  <td> 1000 </td>  <td> 10000 </td>
			</tr>
		</table>
	</td></tr>
</table>
</div>

<div class='slide'>
<h1> Nested Loops - <code>powtable.cpp</code> </h1>
<script type='text/javascript'>
	//<![CDATA[
		wrapCode( "powtable.cpp" )
	//]]>
</script>
</div>

<div class='slide'>
<h1>
	<script type='text/javascript'>
	//<![CDATA[
		section( "5" )
	//]]>
	</script>
	Processing Input </h1>
<ul>
  <li> When processing a sequence of input values, you need some way of
		knowing when you've reached the end </li>
	<li> A special value used to signal termination is called a
		<dfn>sentinel</dfn> </li>
  <li> <em>Only</em> use a value as a sentinel if it's not valid input </li>
	<li> Do not use arbitrary, but valid, values (999, 9999, etc) </li>
	<li> Following program computes the average of <em>non-negative</em>
		inputs
		<ul>
			<li> Note that <code>salary</code> must be initialized to anything
			besides <code>-1</code> </li>
		</ul>
	</li>
</ul>
</div>

<div class='slide'>
<h1> Processing Input - using sentinels (<code>sentinel.cpp</code>) </h1>
<script type='text/javascript'>
	//<![CDATA[
		wrapCode( "sentinel.cpp" )
	//]]>
</script>
</div>

<div class='slide'>
<h1> Processing Inputs - input failures </h1>
<table>
<tr>
	<td>
		<ul>
			<li> If the input stream fails (e.g., entering a non-numeric string
				when an integer is expected), it enters a <dfn>fail state</dfn>
				</li>
			<li> To test:
				<pre>if( cin.fail() )</pre>
			</li>
			<li> The <dfn>EOF</dfn> (end of file) will also set the fail state
				</li>
			<li> To signal EOF, use ctrl-D (on Unix and Mac), or ctrl-Z (on
				Windows) </li>
		</ul>
	</td>
	<td class='line'>
<pre>cout &lt;&lt; "Enter values, Q to quit: ";
bool more = true;
while (more)
{
   cin &gt;&gt; value;
   if (cin.fail())
   {
      more = false;
   }
   else
   {
      process value
   }
}</pre>
	</td>
</tr></table>
</div>

<div class='slide'>
<h1> Processing Inputs - input failures </h1>
<ul>
	<li> If the object itself is evaluated as a Boolean, it will return its
	state (<dfn>True</dfn> means that the stream is okay):
		<pre>if( ! cin )</pre>
	</li>
	<li> The <code>&gt;&gt;</code> operator returns the stream object (LHS)
		</li>
	<li> This is a common idiom:
<pre>cout &lt;&lt; "Enter a value =&gt; ";
while (cin &gt;&gt; input)
{
   sum += input ;
   ++count ;
   cout &lt;&lt; "Enter a value ('Q' to quit) =&gt; ";
}</pre>
	</li>
</ul>
</div>


<div class='slide'>
<h1>
	<script type='text/javascript'>
	//<![CDATA[
		section( "6" )
	//]]>
	</script>
	Random Numbers and Simulations </h1>
<ul>
	<li> Computer can be used to simulate an activity </li>
	<li> Commonly used for
		<ul>
			<li> Predicting climate change </li>
			<li> Analyzing traffic (human, auto, etc.) </li>
			<li> Picking stocks </li>
			<li> etc. </li>
		</ul>
	</li>
	<li> It can use random numbers to help with these simulations </li>
</ul>
</div>

<div class='slide'>
<h1 class='subsect'> 
	<script type='text/javascript'>
	//<![CDATA[
		taxonomy( "6.1" )
	//]]>
	</script>
Generating Random Numbers </h1>
<ul>
	<li> Need random numbers to simulate random drops of the needle </li>
	<li> Need a <dfn>random number generator</dfn> (<dfn>RNG</dfn>)
		<ul>
			<li> <code>rand()</code> produces apparently random integers on the
				interval [0, <code>RAND_MAX</code>] (typically 32,767, or
				2,147,483,647) </li>
			<li> Found in <code>cstdlib</code> header </li>
			<li> It's a <em>pseudo</em>-RNG </li>
		</ul>
	</li>
	<li> The following program produces the same random numbers each time it's
		run </li>
	<li> After debugging, you can seed the generator (just once!):
<pre>#include &lt;ctime&gt;
...
srand(time(0))</pre>
	</li>
</ul>
</div>

<div class='slide'>
<h1> Generating Random Numbers - <code>random.cpp</code> </h1>
<script type='text/javascript'>
	//<![CDATA[
		wrapCode( "random.cpp" )
	//]]>
</script>
</div>

<div class='slide'>
<h1 class='subsect'> 
	<script type='text/javascript'>
	//<![CDATA[
		taxonomy( "6.2" )
	//]]>
	</script>
Simulating Die Tosses </h1>
<ul>
	<li> We want random integers on [<var>a</var>, <var>b</var>] </li>
	<li> There are <var>b - a + 1</var> values between <var>a</var> and
		<var>b</var> </li>
	<li> To get values on [0, <var>b-a</var>]:
		<pre>rand() % (b - a + 1)</pre>
	</li>
	<li> Add <var>a</var> to get values on [<var>a</var>, <var>b</var>]
		<pre>int r = a + rand() % (b - a + 1);</pre>
	</li>
	<li> The following program simulates throwing a pair of dice </li>
</ul>
</div>

<div class='slide'>
<h1> Simulation - <code>dice.cpp</code> </h1>
<script type='text/javascript'>
	//<![CDATA[
		wrapCode( "dice.cpp" )
	//]]>
</script>
</div>

<div class='slide'>
<h1 class='subsect'> 
	<script type='text/javascript'>
	//<![CDATA[
		taxonomy( "6" )
	//]]>
	</script>
The Monte Carlo Method </h1>
<h3> Approximating &pi; </h3>
<table>
<tr>
	<td>
		<ul>
			<li> Inscribe a circle of radius 1 in a box </li>
			<li> Throw darts at it </li>
			<li> Count the # of darts that hit inside the square </li>
			<li> Divide by the # of darts that hit only inside the circle
				<div class='line'> <var>A</var><sub>square</sub> /
					<var>A</var><sub>circle</sub> = &pi; / 4 </div>
			</li>
			<li> So, multiply this ratio by 4 to find an approximation of &pi;
			</li>
			<li> The more darts we throw (assuming a good RNG), the better the
				approximation </li>
		</ul>
	</td>
	<td>
		<script type='text/javascript'>
		//<![CDATA[
			image( "target.png" )
		//]]>
		</script>
	</td>
</tr></table>
</div>

<div class='slide'>
<h1> The Monte Carlo Method </h1>
<ul>
	<li> We need 2 number, the x- and y-coordinates </li>
	<li> They will be floats, on [-1, 1] </li>
	<li> Compute a number on [0, 1]:
		<pre>double r = rand() * 1.0 / RAND_MAX;</pre>
		<ul>
			<li> Note, the <code>1.0</code> is to avoid integer division.  Or, use
				<code>static_cast</code> </li>
		</ul>
	</li>
	<li> To get a value on [-1, 1]:
		<pre>double x = -1 + 2 * r;</pre>
	</li>
	<li> We know it landed in the box </li>
	<li> Did it land in the cirlce?  Compute the distanc from the origin:
		<pre>bool hit = ( x*x + y*y ) < 1</pre>
	</li>
</ul>
</div>

<div class='slide'>
<h1> Simulation - <code>montecarlo.cpp</code> </h1>
<script type='text/javascript'>
	//<![CDATA[
		wrapCode( "montecarlo.cpp" )
	//]]>
</script>
</div>

</body>
</html>
